{"ast":null,"code":"import _slicedToArray from\"/Users/kedpan/Desktop/ucmc/ucmc-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import{BrowserRouter as Router,Switch,Route}from\"react-router-dom\";import Login from'./components/Login';import Dashboard from'./components/Dashboard';import Patients from'./components/Patients';import'./App.css';import{useCookies}from'react-cookie';import{useDispatch,useSelector}from'react-redux';import{login,logout,selectUser}from'./features/userSlice';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var user=useSelector(selectUser);var dispatch=useDispatch();var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,3),cookie=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var signOut=function signOut(){localStorage.removeItem('user');removeCookie('token');dispatch(logout());};useEffect(function(){var loggedUser=localStorage.getItem('user');if(Object.keys(cookie).length!==0&&loggedUser){// Logged in\ndispatch(login(JSON.parse(loggedUser)));}else{// Logged out\ndispatch(logout());}return;},[dispatch]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Router,{children:!user?/*#__PURE__*/_jsx(Login,{}):/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/patients\",exact:true,children:/*#__PURE__*/_jsx(Patients,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",children:/*#__PURE__*/_jsx(Dashboard,{})})]})})});}export default App;","map":{"version":3,"names":["React","useEffect","BrowserRouter","Router","Switch","Route","Login","Dashboard","Patients","useCookies","useDispatch","useSelector","login","logout","selectUser","axios","App","user","dispatch","cookie","setCookie","removeCookie","signOut","localStorage","removeItem","loggedUser","getItem","Object","keys","length","JSON","parse"],"sources":["/Users/kedpan/Desktop/ucmc/ucmc-app/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport Login from './components/Login';\nimport Dashboard from './components/Dashboard';\nimport Patients from './components/Patients';\nimport './App.css';\nimport { useCookies } from 'react-cookie';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login, logout, selectUser } from './features/userSlice';\nimport axios from 'axios';\n\nfunction App() {\n  const user = useSelector(selectUser);\n  const dispatch = useDispatch();\n  const [cookie, setCookie, removeCookie] = useCookies(['token']);\n\n  const signOut = () => {\n    localStorage.removeItem('user');\n    removeCookie('token');\n    dispatch(logout());\n  }\n\n  useEffect(() => {\n    const loggedUser = localStorage.getItem('user');\n    if (Object.keys(cookie).length !== 0 && loggedUser) {\n      // Logged in\n      dispatch(\n        login(JSON.parse(loggedUser))\n      );\n    } else {\n      // Logged out\n      dispatch(logout());\n    }\n\n    return;\n  }, [dispatch]);\n  \n  return (\n    <div className=\"App\">\n      <Router>\n        {(!user) ? (\n          <Login />\n        ) : (\n          <Switch>\n            <Route path=\"/patients\" exact>\n              <Patients />\n            </Route>\n            <Route path=\"/\">\n              <Dashboard />\n            </Route>\n          </Switch>\n        )}\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"yHAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OACEC,aAAa,GAAIC,CAAAA,MADnB,CAEEC,MAFF,CAGEC,KAHF,KAIO,kBAJP,CAKA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAO,WAAP,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,KAAT,CAAgBC,MAAhB,CAAwBC,UAAxB,KAA0C,sBAA1C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,GAAMC,CAAAA,IAAI,CAAGN,WAAW,CAACG,UAAD,CAAxB,CACA,GAAMI,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,gBAA0CD,UAAU,CAAC,CAAC,OAAD,CAAD,CAApD,4CAAOU,MAAP,iBAAeC,SAAf,iBAA0BC,YAA1B,iBAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBC,YAAY,CAACC,UAAb,CAAwB,MAAxB,EACAH,YAAY,CAAC,OAAD,CAAZ,CACAH,QAAQ,CAACL,MAAM,EAAP,CAAR,CACD,CAJD,CAMAZ,SAAS,CAAC,UAAM,CACd,GAAMwB,CAAAA,UAAU,CAAGF,YAAY,CAACG,OAAb,CAAqB,MAArB,CAAnB,CACA,GAAIC,MAAM,CAACC,IAAP,CAAYT,MAAZ,EAAoBU,MAApB,GAA+B,CAA/B,EAAoCJ,UAAxC,CAAoD,CAClD;AACAP,QAAQ,CACNN,KAAK,CAACkB,IAAI,CAACC,KAAL,CAAWN,UAAX,CAAD,CADC,CAAR,CAGD,CALD,IAKO,CACL;AACAP,QAAQ,CAACL,MAAM,EAAP,CAAR,CACD,CAED,OACD,CAbQ,CAaN,CAACK,QAAD,CAbM,CAAT,CAeA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,KAAC,MAAD,WACI,CAACD,IAAF,cACC,KAAC,KAAD,IADD,cAGC,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,KAAK,KAA7B,uBACE,KAAC,QAAD,IADF,EADF,cAIE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,uBACE,KAAC,SAAD,IADF,EAJF,GAJJ,EADF,EADF,CAkBD,CAED,cAAeD,CAAAA,GAAf"},"metadata":{},"sourceType":"module"}